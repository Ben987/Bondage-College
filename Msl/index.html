<!DOCTYPE html>
<html style="width:100%; height:100%; padding:0px; margin:0px;">
<head>
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
	<title>Thematic Resort and Fantasy Club</title>
	<!--<script src="./Lib/hammer.min.js"></script>-->
	
	<script src="../BondageClub/Assets/Female3DCG/Female3DCG.js"></script>
	
	<script src="../BondageClub/Scripts/LZString.js"></script>	
	<script src="../BondageClub/Scripts/socket.io/socket.io.js"></script>	
	
	<script src="./Environment.js"></script>
	
	<script src="./Scripts/Util.js"></script>
	<script src="./Scripts/Util/Core.js"></script>
	<script src="./Scripts/Util/Dom.js"></script>
	<script src="./Scripts/Util/Color.js"></script>
	<script src="./Scripts/Util/Render.js"></script>
	<script src="./Scripts/Util/Svg.js"></script>
	
	<script src="./Scripts/F3dcgAssets/Assets.js"></script>
	<script src="./Scripts/F3dcgAssets/Import.js"></script>
	<script src="./Scripts/F3dcgAssets/Validation.js"></script>
	<script src="./Scripts/F3dcgAssets/Inventory.js"></script>
	<script src="./Scripts/F3dcgAssets/Render.js"></script>
	
	<script src="./Scripts/MslServer.js"></script>
	<script src="./Scripts/DevTools.js"></script>	
	<script src="./Scripts/MainContainer.js"></script>	
	<script src="./Scripts/MainController.js"></script>
	<script src="./Scripts/PlayerAccount.js"></script>
	
	<script src="./Scripts/Location/Actions.js"></script>
	<script src="./Scripts/Location/Chat.js"></script>
	<script src="./Scripts/Location/Controller.js"></script>	
	<script src="./Scripts/Location/Minigames.js"></script>
	<script src="./Scripts/Location/Player.js"></script>
	<script src="./Scripts/Location/View.js"></script>
	
	<script src="./Scripts/Location/Hud.js"></script>
	
	<script src="./Scripts/Location/Dialog/Dialog.js"></script>
	<script src="./Scripts/Location/Dialog/Appearance.js"></script>
	<script src="./Scripts/Location/Dialog/AppearanceActions.js"></script>
	<script src="./Scripts/Location/Dialog/Profile.js"></script>
	<script src="./Scripts/Location/Dialog/Social.js"></script>
	<script src="./Scripts/Location/Dialog/Settings.js"></script>
	
	<script src="./Scripts/Minigame/MinigameAbCancel.js"></script>
	<script src="./Scripts/Minigame/MinigameComplyRefuse.js"></script>	
	
	<link rel="stylesheet" type="text/css" href="./styles.css" />
</head>

<script>


//TODO:  addEventListener supports multiple listeners, move away from global scope.
var KeyDownEventListeners = {};
window.addEventListener('keydown', (e) => {for(key in KeyDownEventListeners) KeyDownEventListeners[key](e);});	

window.addEventListener("load", function(){
	F3dcgAssets.Init();
	MainContainer.Resize();
	MslServer.Init();
	Util.ProcessIncludesRecursive(document.body);
	
	var playerId = sessionStorage.getItem("playerId"), sessionId = sessionStorage.getItem("sessionId");
	
	if(playerId && sessionId && playerId != "undefined" && sessionId != "undefined")
		MainController.LoginWithSessionId(sessionId, playerId);
	else
		MainController.Init();
	
});

window.addEventListener('resize', MainContainer.Resize, false);

</script>

<body style="width:100%; height:100%; background-color:black; color:white; margin:0px; padding:0px; overflow:hidden;user-select:none;">
	<div id="MainContainer" class="full-block" style="position:relative;overflow:hidden;display:inline-block;">
		<div id="LoginView" class="full-block">
			<select name="userList"></select>
			<button onclick="MainController.Login()">Login</button>
			<br />
		</div>
		
		<div id="MainView" class="full-block" style="display:none;" >
			<button onclick="MainController.ShowCreateLocationTypes()" >Create Location</button> <br />
		</div>
		
		<div id="CreateLocationTypesView" class="full-block" style="display:none;"></div>
		
		<div id="CreateLocationView" class="full-block" style="display:none;"></div>
		
		<div id="LocationView" style="width:100%;height:100%;display:none;position:absolute;overflow:hidden;">
			<div id="LocationViewCanvas" style="width:100%; height:100%; overflow:hidden; position:absolute; z-index:0">
				<img id="LocationViewBackground" src="" alt="" class="full-block" style="z-index:-10000" />
				<div id="LocationViewMidground" class="full-block" style="overflow:hidden;"></div>
				<img id="LocationViewForeground" src="" alt="" class="full-block" style="z-index:10000;"/>
				<div id="LocationViewInput" class="full-block" style="z-index:10000;"></div>
			</div>
			
			<div id="LocationViewHud" style="z-index:10000;" class="full-block">
				<!--<include src="./Html/Hud/InputSideLeft.htm" id="LocationViewSideInputLeft" class="roll-left roll-left-small"></include>-->
				<!--<include src="./Html/Hud/BottomChat.htm" id="LocationViewChat" class="chat-container"></include>-->
				
				<div class="hover-button-highlight" style="position:absolute; left:97%; top:2%; width:3%; height:6%;" onclick="ClassicHud.RollForward()"><img src="./Images/Icons/Out.png" alt="RollOut" class="fill-container"/></div>
				<include src="./Html/Hud/Classic.htm" id="ClassicRoomHud" class="classic-hud-right"></include>
			</div>
		</div>
	</div>
	
	<div name="uiTemplates" style="display:none; visibility:hidden">
		
		<div id="DialogSelfTemplate" class="dialog normal" onclick="event.stopPropagation()">
			<div name="background" class="dialog-background full-block">
				<img alt="backgroundImage" class='fill-container' />
			</div>
			<include src="./Html/Dialog/TopLevelMenu.htm" name="topLevelMenuContainer" class="dialog-selection" ></include>
			<div name="viewContainer" class="dialog-views">
				<include src="./Html/Dialog/Profile.htm" name="profile" class="dialog-profile"></include>
				<include src="./Html/Dialog/Social.htm" name="social" class="dialog-social"></include>
				<include src="./Html/Dialog/Appearance.htm" name="appearance" class="dialog-appearance"></include>
				<include src="./Html/Dialog/Settings.htm" name="settings" class="dialog-appearance"></include>
			</div>
		</div>
		
		<include src="./Html/Hud/Profile.htm" id="PlayerProfileTemplate" class="hud-profile-container"></include>
		
		<!-- minigames -->
		
		<include src="./Html/Minigame/AbCancel.htm" id="MinigameAbCancelTemplate" class="mingame-abcancel"></include>
		<include src="./Html/Minigame/ComplyRefuse.htm" id="MinigameComplyRefuseTemplate" class="mingame-complyrefuse"></include>
		
		<!-- dev tools -->
		
		<include src="./Html/DevTools/DevTools.htm" id="DevTools"></include>
	</div>
</body>



</html>
